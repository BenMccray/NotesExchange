{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState, useRef } from \"react\";\nimport { io } from \"socket.io-client\";\nconst URL = \"http://localhost:8080\"; //might be wrong, test and drop \"/chat\"\n\nexport function useSocket(chatId) {\n  _s();\n  const socketRef = useRef(null);\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    if (!chatId) return;\n    if (socketRef.current) socketRef.current.disconnect();\n    const sock = io(`${URL}`, {\n      path: \"/chat\",\n      query: {\n        chatId: chatId\n      },\n      transports: [\"websocket\"],\n      withCredentials: true\n    });\n    socketRef.current = sock;\n    sock.on(\"message\", message => {\n      setMessages(prev => [...prev, message]);\n    });\n    sock.on(\"connect\", () => console.log(`Connected to chatRoom ${chatId}`));\n    sock.on(\"disconnect\", () => console.log(`Disconnected from chatRoom ${chatId}`));\n    return () => {\n      sock.disconnect();\n    };\n  }, [chatId]);\n  const sendMessage = message => {\n    if (socket) {\n      socket.emit(\"message\", {\n        chatId,\n        message\n      });\n    }\n  };\n  return {\n    messages,\n    sendMessage\n  };\n}\n_s(useSocket, \"gz4OrkzwUwTkewhT4BOSBwWi6kg=\");","map":{"version":3,"names":["useEffect","useState","useRef","io","URL","useSocket","chatId","_s","socketRef","messages","setMessages","current","disconnect","sock","path","query","transports","withCredentials","on","message","prev","console","log","sendMessage","socket","emit"],"sources":["C:/Users/benmccray/Projects/jmu-notes-exchange/client/src/hooks/useSocket.js"],"sourcesContent":["import {useEffect, useState, useRef} from \"react\";\r\nimport {io} from \"socket.io-client\";\r\n\r\nconst URL = \"http://localhost:8080\" //might be wrong, test and drop \"/chat\"\r\n\r\nexport function useSocket(chatId) {\r\n    const socketRef = useRef(null);\r\n    const [messages, setMessages] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (!chatId) return\r\n\r\n        if (socketRef.current) socketRef.current.disconnect();\r\n\r\n        const sock = io(`${URL}`,\r\n            {\r\n                path: \"/chat\",\r\n                query: {chatId: chatId},\r\n                transports: [\"websocket\"],\r\n                withCredentials: true\r\n            }\r\n        );\r\n    \r\n        socketRef.current = sock;\r\n\r\n        sock.on(\"message\", (message) => {\r\n            setMessages((prev) => [...prev, message]);\r\n        })\r\n    \r\n        sock.on(\"connect\", () => console.log(`Connected to chatRoom ${chatId}`));\r\n        sock.on(\"disconnect\", () => console.log(`Disconnected from chatRoom ${chatId}`))\r\n        \r\n        return () => {\r\n            sock.disconnect();\r\n        }\r\n    }, [chatId]);\r\n\r\n    const sendMessage = (message) => {\r\n        if (socket) {\r\n            socket.emit(\"message\", {chatId, message});\r\n        }\r\n    };\r\n\r\n    return {messages, sendMessage};\r\n}"],"mappings":";AAAA,SAAQA,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAO,OAAO;AACjD,SAAQC,EAAE,QAAO,kBAAkB;AAEnC,MAAMC,GAAG,GAAG,uBAAuB,EAAC;;AAEpC,OAAO,SAASC,SAASA,CAACC,MAAM,EAAE;EAAAC,EAAA;EAC9B,MAAMC,SAAS,GAAGN,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACZ,IAAI,CAACM,MAAM,EAAE;IAEb,IAAIE,SAAS,CAACG,OAAO,EAAEH,SAAS,CAACG,OAAO,CAACC,UAAU,CAAC,CAAC;IAErD,MAAMC,IAAI,GAAGV,EAAE,CAAC,GAAGC,GAAG,EAAE,EACpB;MACIU,IAAI,EAAE,OAAO;MACbC,KAAK,EAAE;QAACT,MAAM,EAAEA;MAAM,CAAC;MACvBU,UAAU,EAAE,CAAC,WAAW,CAAC;MACzBC,eAAe,EAAE;IACrB,CACJ,CAAC;IAEDT,SAAS,CAACG,OAAO,GAAGE,IAAI;IAExBA,IAAI,CAACK,EAAE,CAAC,SAAS,EAAGC,OAAO,IAAK;MAC5BT,WAAW,CAAEU,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAED,OAAO,CAAC,CAAC;IAC7C,CAAC,CAAC;IAEFN,IAAI,CAACK,EAAE,CAAC,SAAS,EAAE,MAAMG,OAAO,CAACC,GAAG,CAAC,yBAAyBhB,MAAM,EAAE,CAAC,CAAC;IACxEO,IAAI,CAACK,EAAE,CAAC,YAAY,EAAE,MAAMG,OAAO,CAACC,GAAG,CAAC,8BAA8BhB,MAAM,EAAE,CAAC,CAAC;IAEhF,OAAO,MAAM;MACTO,IAAI,CAACD,UAAU,CAAC,CAAC;IACrB,CAAC;EACL,CAAC,EAAE,CAACN,MAAM,CAAC,CAAC;EAEZ,MAAMiB,WAAW,GAAIJ,OAAO,IAAK;IAC7B,IAAIK,MAAM,EAAE;MACRA,MAAM,CAACC,IAAI,CAAC,SAAS,EAAE;QAACnB,MAAM;QAAEa;MAAO,CAAC,CAAC;IAC7C;EACJ,CAAC;EAED,OAAO;IAACV,QAAQ;IAAEc;EAAW,CAAC;AAClC;AAAChB,EAAA,CAvCeF,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}